<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cilk Plus/LLVM</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <div class="inner">
          <a id="forkme_banner" href="https://github.com/cilkplus?tab=repositories">View on GitHub</a>

          <h1 id="project_title">Cilk Plus/LLVM</h1>
          <h2 id="project_tagline">An implementation of the Intel® Cilk™ Plus C/C++ language extensions in LLVM</h2>

          <div id="downloads">
            <a class="nav_link" href="#try">Try it!</a>
            <a class="nav_link" href="#status">Status</a>
            <a class="nav_link" href="#license">License</a>
            <a class="nav_link" href="#contact">Contact</a>
          </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <div id="main_content" class="inner">
<p>Intel® Cilk™ Plus is an extension to the C and C++ languages to support data and task parallelism.  It is the easiest, quickest way to harness the power of both multicore and vector processing.  Visit <a href="http://cilkplus.org">cilkplus.org</a> for details.</p>

<p>This project implements the Intel® Cilk™ Plus language extensions in the <a href="http://clang.llvm.org">Clang</a> frontend for <a href="http://llvm.org">LLVM</a>.  The commercial version of Cilk Plus is available as part of the <a href="http://software.intel.com/en-us/intel-composer-xe/">Intel® C++ Composer XE compiler</a>.  There is also an open source version available in the "cilkplus" branch of the GCC C/C++ compiler.  More information is available on <a href="http://cilkplus.org/which-license">cilkplus.org</a>.</p>

<p><a name="try"></a></p>

<h1>Try Cilk Plus/LLVM</h1>

<p><em>Note: Cilk Plus/LLVM does not yet support all of the Intel® Cilk™ Plus extensions.  See <a href="#status">Status</a>.</em></p>

<h3>Requirements</h3>

<p>Most software and hardware requirements are the same as for <a href="http://llvm.org/docs/GettingStarted.html#requirements">LLVM</a>.  However, support is currently limited to 64 bit Linux and Mac OS X - see <a href="#status">status</a> for details on supported configurations and known issues.</p>

<p>CMake version 2.8.8 or greater is required to compile compiler-rt.</p>

<h3>Getting the source code</h3>

<pre><code>$ git clone -b cilkplus https://github.com/cilkplus/llvm
$ git clone -b cilkplus https://github.com/cilkplus/clang llvm/tools/clang
$ git clone -b cilkplus https://github.com/cilkplus/compiler-rt llvm/projects/compiler-rt
</code></pre>

<p>The source code structure follows Clang/LLVM: <a href="http://llvm.org/docs/GettingStarted.html">http://llvm.org/docs/GettingStarted.html</a>.</p>

<h3>Building</h3>

<p>Currently, only CMake-based building is supported.  Detailed instructions on how to build Clang/LLVM/Compiler-rt with CMake can be found in the following page: <a href="http://llvm.org/docs/CMake.html">http://llvm.org/docs/CMake.html</a>.  In the following command, make sure to replace <code>/install/prefix</code> with the location where you would like to install the binaries.</p>

<pre><code>$ cd llvm
$ mkdir build &amp;&amp; cd build
$ cmake -DCMAKE_INSTALL_PREFIX=/install/prefix -DCMAKE_BUILD_TYPE=Release \
        -DLLVM_TARGETS_TO_BUILD=X86 ..
$ make &amp;&amp; make install
</code></pre>

<p><em>Mac OS X</em></p>

<p>The basic steps are the same as above.  However, on Max OS X it is recommanded to build with the Clang compiler shipped with the OS.  Add the following definitions to the cmake command above.</p>

<pre><code>-DCMAKE_C_COMPILER=clang -DCMAKE_CXX_COMPILER=clang++
</code></pre>

<h3>Using</h3>

<p>To use the newly installed compiler, add the following to your environment.  On Mac OS X, replace LD_LIBRARY_PATH with DYLD_LIBRARY_PATH.</p>

<pre><code>export PATH=$PATH:/install/prefix/bin
export C_INCLUDE_PATH=$C_INCLUDE_PATH:/install/prefix/include
export CPLUS_INCLUDE_PATH=$CPLUS_INCLUDE_PATH:/install/prefix/include
export LIBRARY_PATH=$LIBRARY_PATH:/install/prefix/lib
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/install/prefix/lib
</code></pre>

<p>When you build a program that uses Intel® Cilk™ Plus extensions, add the following options to enable Cilk Plus support and link to the runtime library.</p>

<pre><code>-fcilkplus -lcilkrts
</code></pre>

<h3>A simple program</h3>

<pre><code>#include &lt;cilk/cilk.h&gt;
#include &lt;assert.h&gt;

int fib(int n) {
  if (n &lt; 2)
    return 1;
  int a = cilk_spawn fib(n-1);
  int b = fib(n-2);
  cilk_sync;
  return a + b;
}

int main() {
  int result = fib(30);
  assert(result == 1346269);
  return 0;
} 
</code></pre>

<p>Confirm that the compiler is working correctly by saving the above code code to a file.</p>

<pre><code>$ clang -fcilkplus test.c -o test -lcilkrts
$ ./test
</code></pre>

<p>You can check that the code is executing in parallel by using the time command and CILK_NWORKERS environment variable to control the number of workers.</p>

<pre><code>$ CILK_NWORKERS=1 time ./test
$ CILK_NWORKERS=2 time ./test
$ CILK_NWORKERS=4 time ./test
</code></pre>

<p><a name="status"></a></p>

<h1>Status</h1>

<h3>What works right now</h3>

<table>
<tr>
<th>Feature</th>
<th align="center">Supported?</th>
</tr>
<tr>
<td>cilk_spawn, cilk_sync</td>
<td align="center"><a href="images/green_check.png" target="_blank"><img src="images/green_check.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
</tr>
<tr>
<td>hyperobjects</td>
<td align="center"><a href="images/green_check.png" target="_blank"><img src="images/green_check.png" alt="check" title="Yes" style="max-width:100%;"></a></td>
</tr>
<tr>
<td>cilk_for</td>
<td align="center"></td>
</tr>
<tr>
<td>#pragma simd</td>
<td align="center"></td>
</tr>
<tr>
<td>elemental functions</td>
<td align="center"></td>
</tr>
<tr>
<td>array notation</td>
<td align="center"></td>
</tr>
</table><h3>Supported platforms</h3>

<p>OS: Linux or Mac OS X<br>
Architecture: x86-64</p>

<h3>Known issues</h3>

<ul>
<li>In C++, initializing a variable from a spawn that may throw an exception does not work yet. E.g.</li>
</ul><pre><code>_Cilk_spawn may_throw(); // OK
Foo f = _Cilk_spawn may_throw(); // not working yet
Foo f = _Cilk_spawn will_not_throw(); // OK
</code></pre>

<ul>
<li>There appear to be edge-cases in exception handling that do not work correctly, particularly with nested spawns.</li>
<li>Using variable-length arrays in a spawning function does not work yet.</li>
</ul><p><a name="license"></a></p>

<h1>License</h1>

<p>LLVM, Clang, and Compiler-rt are distributed under LLVM's <a href="http://llvm.org/docs/DeveloperPolicy.html#license">"UIUC" BSD-Style license</a>.  For details, including information about third-party components, see LICENSE.txt in the code repositories.</p>

<p>The Intel® Cilk™ Plus runtime library is distributed under a <a href="http://opensource.org/licenses/BSD-3-Clause">BSD 3-Clause license</a>.</p>

<p><a name="contact"></a></p>

<h1>Contact</h1>

<p>If you would like to report a bug, or make a feature request, you can submit an issue in Github <a href="https://github.com/cilkplus/clang/issues">here</a>.</p>

<p>You can also contact us via the the <a href="http://software.intel.com/en-us/forums/intel-cilk-plus/">Intel Cilk Plus forum</a> on the Intel Developer Zone.</p>      </div>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">© 2012-2013 Intel Corporation. <a href="http://software.intel.com/en-us/articles/optimization-notice">Optimization Notice</a>
        <br />Intel and Cilk are trademarks of Intel Corporation in the U.S. and/or other countries.</p>
        <p>Slate theme maintained by <a href="https://github.com/jsncostello">Jason Costello</a></p>
      </footer>
    </div>

  </body>
</html>
